import{u as V,p as U,t as j,s as F}from"./tickets-DuiWy3BW.js";import{d as $,r as b,c as o,o as i,w as D,a as e,b as _,v as S,e as R,F as h,f as A,t as u,u as w,g as v,T as N,h as k,i as x,j as z,k as P,l as E,s as G,m as M,n as H,p as O}from"./index-ywpcxkc4.js";const q={class:"mb-2"},I={class:"mb-2"},J={class:"mb-2"},K=["value"],Q=$({__name:"AddTicketForm",emits:["ticket-added"],setup(c,{emit:y}){const p=y,l=V(),n=b(""),a=b(""),f=b("Medium");function T(){n.value&&a.value&&(l.addTicket({title:n.value,description:a.value,priority:f.value}),n.value="",a.value="",f.value="Medium",p("ticket-added"))}return(C,s)=>(i(),o("form",{onSubmit:D(T,["prevent"])},[s[6]||(s[6]=e("h3",{class:"text-lg font-bold mb-2"},"Add New Ticket",-1)),e("div",q,[s[3]||(s[3]=e("label",{for:"title",class:"block text-sm font-medium text-gray-700"},"Title",-1)),_(e("input",{type:"text",id:"title","onUpdate:modelValue":s[0]||(s[0]=d=>n.value=d),class:"mt-1 block w-full rounded-md border-gray-300 pl-2 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50"},null,512),[[S,n.value]])]),e("div",I,[s[4]||(s[4]=e("label",{for:"description",class:"block text-sm font-medium text-gray-700"},"Description",-1)),_(e("textarea",{id:"description","onUpdate:modelValue":s[1]||(s[1]=d=>a.value=d),rows:"3",class:"mt-1 pl-2 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50"},null,512),[[S,a.value]])]),e("div",J,[s[5]||(s[5]=e("label",{for:"priority",class:"block text-sm font-medium text-gray-700"},"Priority",-1)),_(e("select",{id:"priority","onUpdate:modelValue":s[2]||(s[2]=d=>f.value=d),class:"mt-1 block w-full rounded-md border-gray-300 pl-2 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50"},[(i(!0),o(h,null,A(w(U),d=>(i(),o("option",{key:d,value:d},u(d),9,K))),128))],512),[[R,f.value]])]),s[7]||(s[7]=e("button",{type:"submit",class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"}," Add Ticket ",-1))],32))}}),W={class:"bg-white rounded-lg shadow-xl w-full max-w-lg"},X={class:"p-6"},Y=$({__name:"AppModal",props:{show:{type:Boolean,default:!1}},emits:["close"],setup(c,{emit:y}){const p=y;return(l,n)=>(i(),o(h,null,[v(N,{name:"fade"},{default:k(()=>[c.show?(i(),o("div",{key:0,class:"fixed inset-0 z-40 bg-gray-900 bg-opacity-75",onClick:n[0]||(n[0]=a=>p("close"))})):x("",!0)]),_:1}),v(N,{name:"fade"},{default:k(()=>[c.show?(i(),o("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4",onClick:n[1]||(n[1]=D(a=>p("close"),["self"]))},[e("div",W,[e("div",X,[z(l.$slots,"default")])])])):x("",!0)]),_:3})],64))}}),Z={class:"p-4 sm:p-6"},ee={class:"flex items-center justify-between mb-4"},te={class:"text-2xl font-bold text-gray-800"},se={key:0,class:"text-center p-8"},oe={key:1,class:"shadow overflow-x-auto border-b border-gray-200 sm:rounded-lg"},ie={class:"min-w-full divide-y divide-gray-200"},ne={class:"bg-gray-50"},re={key:0,scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},de={class:"bg-white divide-y divide-gray-200"},le={class:"px-6 py-4 whitespace-nowrap"},ae={class:"hidden md:table-cell px-6 py-4 whitespace-nowrap text-sm text-gray-500"},ce={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},ue={class:"hidden md:table-cell px-6 py-4 whitespace-nowrap text-sm text-gray-500"},pe={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},me={class:"px-6 py-4 whitespace-nowrap"},fe=["onChange"],ge=["value","selected"],xe={key:0,class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},ye=["onClick"],ve={key:2,class:"text-center border-2 border-dashed border-gray-300 rounded-lg p-12"},be={class:"mt-6"},ke=$({__name:"HomeView",props:{filter:{}},setup(c){const y=P(),p=c,l=b(!1),n=V();E(()=>{n.tickets.length===0&&n.fetchTickets()});const{activeTickets:a,archivedTickets:f}=G(n),T=(g,t)=>{n.updateTicketStatus(g,t)},C=g=>{n.archiveTicket(g)},s=M(()=>p.filter==="archive"?f.value:a.value),d=M(()=>p.filter==="archive"?"Archived Tickets":"Active Tickets");function B(g){C(g),y.success("Ticket archived successfully")}return(g,t)=>{const L=H("RouterLink");return i(),o("div",Z,[e("div",ee,[e("h2",te,u(d.value),1),c.filter==="active"?(i(),o("button",{key:0,onClick:t[0]||(t[0]=r=>l.value=!0),class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"}," Add New Ticket ")):x("",!0)]),w(n).loading?(i(),o("div",se,[...t[4]||(t[4]=[e("h3",{class:"text-2xl font-bold text-gray-800"},"Loading ticket...",-1)])])):s.value.length>0?(i(),o("div",oe,[e("table",ie,[e("thead",ne,[e("tr",null,[t[5]||(t[5]=e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Title ",-1)),t[6]||(t[6]=e("th",{scope:"col",class:"hidden md:table-cell px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Description ",-1)),t[7]||(t[7]=e("th",{scope:"col",class:"md:table-cell px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Priority ",-1)),t[8]||(t[8]=e("th",{scope:"col",class:"hidden md:table-cell px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap"}," Created At ",-1)),t[9]||(t[9]=e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Agent ",-1)),t[10]||(t[10]=e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status ",-1)),c.filter==="active"?(i(),o("th",re," Actions ")):x("",!0)])]),e("tbody",de,[(i(!0),o(h,null,A(s.value,r=>(i(),o("tr",{key:r.id,class:"hover:bg-gray-50"},[e("td",le,[v(L,{to:{name:"ticket-detail",params:{id:r.id}},class:"text-sm font-medium text-blue-600 hover:text-blue-800"},{default:k(()=>[O(u(r.title),1)]),_:2},1032,["to"])]),e("td",ae,u(r.description),1),e("td",ce,u(r.priority),1),e("td",ue,u(w(j)(r.createdAt)),1),e("td",pe,u(r.agent??"Unassigned"),1),e("td",me,[e("select",{onChange:m=>T(r.id,m.target.value),class:"rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50"},[(i(!0),o(h,null,A(w(F),m=>(i(),o("option",{key:m,value:m,selected:m===r.status},u(m),9,ge))),128))],40,fe)]),c.filter==="active"?(i(),o("td",xe,[r.status==="Closed"&&!r.isArchived?(i(),o("button",{key:0,onClick:m=>B(r.id),class:"text-indigo-600 hover:text-indigo-900"}," Archive ",8,ye)):x("",!0)])):x("",!0)]))),128))])])])):(i(),o("div",ve,[t[11]||(t[11]=e("h3",{class:"text-xl font-medium text-gray-900"},"No tickets yet",-1)),t[12]||(t[12]=e("p",{class:"mt-1 text-sm text-gray-500"},"Get started by creating a new ticket.",-1)),e("div",be,[e("button",{onClick:t[1]||(t[1]=r=>l.value=!0),type:"button",class:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"}," + Add New Ticket ")])])),v(Y,{show:l.value,onClose:t[3]||(t[3]=r=>l.value=!1)},{default:k(()=>[v(Q,{onTicketAdded:t[2]||(t[2]=r=>l.value=!1)})]),_:1},8,["show"])])}}});export{ke as default};
