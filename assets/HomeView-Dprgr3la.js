import{u as V,t as F,s as L}from"./tickets-tjiSHkvI.js";import{d as k,r as w,c as o,o as i,w as D,a as e,b as A,v as C,F as h,e as x,T as $,f as v,g as f,h as R,u as U,s as z,i as S,j as O,t as p,k as N,l as E,m as b}from"./index-Bf5iU8Hn.js";const G={class:"mb-2"},H={class:"mb-2"},q=k({__name:"AddTicketForm",emits:["ticket-added"],setup(l,{emit:g}){const c=g,r=V(),d=w(""),a=w("");function y(){d.value&&a.value&&(r.addTicket({title:d.value,description:a.value,status:"Open"}),d.value="",a.value="",c("ticket-added"))}return(T,n)=>(i(),o("form",{onSubmit:D(y,["prevent"])},[n[4]||(n[4]=e("h3",{class:"text-lg font-bold mb-2"},"Add New Ticket",-1)),e("div",G,[n[2]||(n[2]=e("label",{for:"title",class:"block text-sm font-medium text-gray-700"},"Title",-1)),A(e("input",{type:"text",id:"title","onUpdate:modelValue":n[0]||(n[0]=m=>d.value=m),class:"mt-1 block w-full rounded-md border-gray-300 pl-2 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50"},null,512),[[C,d.value]])]),e("div",H,[n[3]||(n[3]=e("label",{for:"description",class:"block text-sm font-medium text-gray-700"},"Description",-1)),A(e("textarea",{id:"description","onUpdate:modelValue":n[1]||(n[1]=m=>a.value=m),rows:"3",class:"mt-1 pl-2 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50"},null,512),[[C,a.value]])]),n[5]||(n[5]=e("button",{type:"submit",class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"}," Add Ticket ",-1))],32))}}),I={class:"bg-white rounded-lg shadow-xl w-full max-w-lg"},J={class:"p-6"},K=k({__name:"Modal",props:{show:{type:Boolean,default:!1}},emits:["close"],setup(l,{emit:g}){const c=g;return(r,d)=>(i(),o(h,null,[x($,{name:"fade"},{default:v(()=>[l.show?(i(),o("div",{key:0,class:"fixed inset-0 z-40 bg-gray-900 bg-opacity-75",onClick:d[0]||(d[0]=a=>c("close"))})):f("",!0)]),_:1}),x($,{name:"fade"},{default:v(()=>[l.show?(i(),o("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4",onClick:d[1]||(d[1]=D(a=>c("close"),["self"]))},[e("div",I,[e("div",J,[R(r.$slots,"default")])])])):f("",!0)]),_:3})],64))}}),P={class:"p-4 sm:p-6"},Q={class:"flex items-center justify-between mb-4"},W={class:"text-2xl font-bold text-gray-800"},X={key:0,class:"shadow overflow-x-auto border-b border-gray-200 sm:rounded-lg"},Y={class:"min-w-full divide-y divide-gray-200"},Z={class:"bg-gray-50"},ee={key:0,scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},te={class:"bg-white divide-y divide-gray-200"},se={class:"px-6 py-4 whitespace-nowrap"},oe={class:"hidden md:table-cell px-6 py-4 whitespace-nowrap text-sm text-gray-500"},ie={class:"hidden md:table-cell px-6 py-4 whitespace-nowrap text-sm text-gray-500"},ne={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},de={class:"px-6 py-4 whitespace-nowrap"},re=["onChange"],ae=["value","selected"],le={key:0,class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},ce=["onClick"],ue={key:1,class:"text-center border-2 border-dashed border-gray-300 rounded-lg p-12"},me={class:"mt-6"},ge=k({__name:"HomeView",props:{filter:{}},setup(l){const g=U(),c=l,r=w(!1),d=V(),{activeTickets:a,archivedTickets:y}=z(d),{updateTicketStatus:T,archiveTicket:n}=d,m=S(()=>c.filter==="archive"?y.value:a.value),B=S(()=>c.filter==="archive"?"Archived Tickets":"Active Tickets");function M(_){n(_),g.success("Ticket archived successfully")}return(_,t)=>{const j=O("RouterLink");return i(),o("div",P,[e("div",Q,[e("h2",W,p(B.value),1),l.filter==="active"?(i(),o("button",{key:0,onClick:t[0]||(t[0]=s=>r.value=!0),class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"}," Add New Ticket ")):f("",!0)]),m.value.length>0?(i(),o("div",X,[e("table",Y,[e("thead",Z,[e("tr",null,[t[4]||(t[4]=e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Title ",-1)),t[5]||(t[5]=e("th",{scope:"col",class:"hidden md:table-cell px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Description",-1)),t[6]||(t[6]=e("th",{scope:"col",class:"hidden md:table-cell px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap"}," Created At ",-1)),t[7]||(t[7]=e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Agent ",-1)),t[8]||(t[8]=e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status",-1)),l.filter==="active"?(i(),o("th",ee," Actions ")):f("",!0)])]),e("tbody",te,[(i(!0),o(h,null,N(m.value,s=>(i(),o("tr",{key:s.id,class:"hover:bg-gray-50"},[e("td",se,[x(j,{to:{name:"ticket-detail",params:{id:s.id}},class:"text-sm font-medium text-blue-600 hover:text-blue-800"},{default:v(()=>[E(p(s.title),1)]),_:2},1032,["to"])]),e("td",oe,p(s.description),1),e("td",ie,p(b(F)(s.createdAt)),1),e("td",ne,p(s.agent??"Unassigned"),1),e("td",de,[e("select",{onChange:u=>b(T)(s.id,u.target.value),class:"rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50"},[(i(!0),o(h,null,N(b(L),u=>(i(),o("option",{key:u,value:u,selected:u===s.status},p(u),9,ae))),128))],40,re)]),l.filter==="active"?(i(),o("td",le,[s.status==="Closed"&&!s.isArchived?(i(),o("button",{key:0,onClick:u=>M(s.id),class:"text-indigo-600 hover:text-indigo-900"}," Archive ",8,ce)):f("",!0)])):f("",!0)]))),128))])])])):(i(),o("div",ue,[t[9]||(t[9]=e("h3",{class:"text-xl font-medium text-gray-900"},"No tickets yet",-1)),t[10]||(t[10]=e("p",{class:"mt-1 text-sm text-gray-500"},"Get started by creating a new ticket.",-1)),e("div",me,[e("button",{onClick:t[1]||(t[1]=s=>r.value=!0),type:"button",class:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"}," + Add New Ticket ")])])),x(K,{show:r.value,onClose:t[3]||(t[3]=s=>r.value=!1)},{default:v(()=>[x(q,{onTicketAdded:t[2]||(t[2]=s=>r.value=!1)})]),_:1},8,["show"])])}}});export{ge as default};
