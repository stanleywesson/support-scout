import{u as V,t as j,s as F}from"./tickets-DicU9jUm.js";import{d as T,r as h,c as o,o as i,w as D,a as e,b as A,v as C,F as k,e as v,T as $,f as y,g,h as R,u as U,i as z,s as E,j as S,k as G,t as m,l as w,m as N,n as H}from"./index-CcfGfNso.js";const O={class:"mb-2"},q={class:"mb-2"},I=T({__name:"AddTicketForm",emits:["ticket-added"],setup(l,{emit:x}){const c=x,r=V(),s=h(""),a=h("");function b(){s.value&&a.value&&(r.addTicket({title:s.value,description:a.value}),s.value="",a.value="",c("ticket-added"))}return(_,d)=>(i(),o("form",{onSubmit:D(b,["prevent"])},[d[4]||(d[4]=e("h3",{class:"text-lg font-bold mb-2"},"Add New Ticket",-1)),e("div",O,[d[2]||(d[2]=e("label",{for:"title",class:"block text-sm font-medium text-gray-700"},"Title",-1)),A(e("input",{type:"text",id:"title","onUpdate:modelValue":d[0]||(d[0]=p=>s.value=p),class:"mt-1 block w-full rounded-md border-gray-300 pl-2 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50"},null,512),[[C,s.value]])]),e("div",q,[d[3]||(d[3]=e("label",{for:"description",class:"block text-sm font-medium text-gray-700"},"Description",-1)),A(e("textarea",{id:"description","onUpdate:modelValue":d[1]||(d[1]=p=>a.value=p),rows:"3",class:"mt-1 pl-2 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50"},null,512),[[C,a.value]])]),d[5]||(d[5]=e("button",{type:"submit",class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"}," Add Ticket ",-1))],32))}}),J={class:"bg-white rounded-lg shadow-xl w-full max-w-lg"},K={class:"p-6"},P=T({__name:"AppModal",props:{show:{type:Boolean,default:!1}},emits:["close"],setup(l,{emit:x}){const c=x;return(r,s)=>(i(),o(k,null,[v($,{name:"fade"},{default:y(()=>[l.show?(i(),o("div",{key:0,class:"fixed inset-0 z-40 bg-gray-900 bg-opacity-75",onClick:s[0]||(s[0]=a=>c("close"))})):g("",!0)]),_:1}),v($,{name:"fade"},{default:y(()=>[l.show?(i(),o("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4",onClick:s[1]||(s[1]=D(a=>c("close"),["self"]))},[e("div",J,[e("div",K,[R(r.$slots,"default")])])])):g("",!0)]),_:3})],64))}}),Q={class:"p-4 sm:p-6"},W={class:"flex items-center justify-between mb-4"},X={class:"text-2xl font-bold text-gray-800"},Y={key:0,class:"text-center p-8"},Z={key:1,class:"shadow overflow-x-auto border-b border-gray-200 sm:rounded-lg"},ee={class:"min-w-full divide-y divide-gray-200"},te={class:"bg-gray-50"},se={key:0,scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},oe={class:"bg-white divide-y divide-gray-200"},ie={class:"px-6 py-4 whitespace-nowrap"},ne={class:"hidden md:table-cell px-6 py-4 whitespace-nowrap text-sm text-gray-500"},de={class:"hidden md:table-cell px-6 py-4 whitespace-nowrap text-sm text-gray-500"},re={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},ae={class:"px-6 py-4 whitespace-nowrap"},le=["onChange"],ce=["value","selected"],ue={key:0,class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},pe=["onClick"],fe={key:2,class:"text-center border-2 border-dashed border-gray-300 rounded-lg p-12"},me={class:"mt-6"},ve=T({__name:"HomeView",props:{filter:{}},setup(l){const x=U(),c=l,r=h(!1),s=V();z(()=>{s.tickets.length===0&&s.fetchTickets()});const{activeTickets:a,archivedTickets:b}=E(s),_=(f,t)=>{s.updateTicketStatus(f,t)},d=f=>{s.archiveTicket(f)},p=S(()=>c.filter==="archive"?b.value:a.value),M=S(()=>c.filter==="archive"?"Archived Tickets":"Active Tickets");function B(f){d(f),x.success("Ticket archived successfully")}return(f,t)=>{const L=G("RouterLink");return i(),o("div",Q,[e("div",W,[e("h2",X,m(M.value),1),l.filter==="active"?(i(),o("button",{key:0,onClick:t[0]||(t[0]=n=>r.value=!0),class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"}," Add New Ticket ")):g("",!0)]),w(s).loading?(i(),o("div",Y,[...t[4]||(t[4]=[e("h3",{class:"text-2xl font-bold text-gray-800"},"Loading ticket...",-1)])])):p.value.length>0?(i(),o("div",Z,[e("table",ee,[e("thead",te,[e("tr",null,[t[5]||(t[5]=e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Title ",-1)),t[6]||(t[6]=e("th",{scope:"col",class:"hidden md:table-cell px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Description ",-1)),t[7]||(t[7]=e("th",{scope:"col",class:"hidden md:table-cell px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap"}," Created At ",-1)),t[8]||(t[8]=e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Agent ",-1)),t[9]||(t[9]=e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status ",-1)),l.filter==="active"?(i(),o("th",se," Actions ")):g("",!0)])]),e("tbody",oe,[(i(!0),o(k,null,N(p.value,n=>(i(),o("tr",{key:n.id,class:"hover:bg-gray-50"},[e("td",ie,[v(L,{to:{name:"ticket-detail",params:{id:n.id}},class:"text-sm font-medium text-blue-600 hover:text-blue-800"},{default:y(()=>[H(m(n.title),1)]),_:2},1032,["to"])]),e("td",ne,m(n.description),1),e("td",de,m(w(j)(n.createdAt)),1),e("td",re,m(n.agent??"Unassigned"),1),e("td",ae,[e("select",{onChange:u=>_(n.id,u.target.value),class:"rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50"},[(i(!0),o(k,null,N(w(F),u=>(i(),o("option",{key:u,value:u,selected:u===n.status},m(u),9,ce))),128))],40,le)]),l.filter==="active"?(i(),o("td",ue,[n.status==="Closed"&&!n.isArchived?(i(),o("button",{key:0,onClick:u=>B(n.id),class:"text-indigo-600 hover:text-indigo-900"}," Archive ",8,pe)):g("",!0)])):g("",!0)]))),128))])])])):(i(),o("div",fe,[t[10]||(t[10]=e("h3",{class:"text-xl font-medium text-gray-900"},"No tickets yet",-1)),t[11]||(t[11]=e("p",{class:"mt-1 text-sm text-gray-500"},"Get started by creating a new ticket.",-1)),e("div",me,[e("button",{onClick:t[1]||(t[1]=n=>r.value=!0),type:"button",class:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"}," + Add New Ticket ")])])),v(P,{show:r.value,onClose:t[3]||(t[3]=n=>r.value=!1)},{default:y(()=>[v(I,{onTicketAdded:t[2]||(t[2]=n=>r.value=!1)})]),_:1},8,["show"])])}}});export{ve as default};
