import{d as v,r as w,c as n,o as i,a as t,F as p,f,t as d,u,w as C,b as T,v as A,q as $,s as S,l as N,m as V,n as B,g as D,h as L,p as R,x as j,i as M}from"./index-DiRwIGBK.js";import{u as k,t as b,p as P}from"./tickets-CVHIaxZD.js";const q={class:"mt-6"},F={class:"mt-4 space-y-4"},I={key:0,class:"text-sm text-gray-500"},U={class:"flex-1 space-y-1"},E={class:"flex items-center justify-between"},O={class:"text-sm font-medium"},z={class:"text-sm text-gray-500"},G={class:"text-sm text-gray-500"},H={class:"mt-6"},J=v({__name:"TicketComments",props:{ticket:{type:Object,required:!0}},setup(l){const g=l,c=k(),o=w(""),x=()=>{o.value.trim()===""||!g.ticket||(c.addComment(g.ticket.id,o.value),o.value="")};return(y,e)=>(i(),n("div",q,[e[4]||(e[4]=t("h4",{class:"text-lg font-medium text-gray-900"},"Comments",-1)),t("div",F,[!l.ticket.comments||l.ticket.comments.length===0?(i(),n("div",I," No Comments yet. ")):(i(!0),n(p,{key:1},f(l.ticket.comments,a=>(i(),n("div",{key:a.id,class:"flex space-x-3"},[e[1]||(e[1]=t("div",{class:"flex-shrink-0"},[t("img",{src:"https://www.gravatar.com/avatar/"})],-1)),t("div",U,[t("div",E,[t("h3",O,d(a.author),1),t("p",z,d(u(b)(a.createdAt)),1)]),t("p",G,d(a.text),1)])]))),128))]),t("div",H,[t("form",{onSubmit:C(x,["prevent"])},[t("div",null,[e[2]||(e[2]=t("label",{for:"comment",class:"sr-only"},"Add a comment",-1)),T(t("textarea",{"onUpdate:modelValue":e[0]||(e[0]=a=>o.value=a),id:"comment",name:"comment",rows:"3",class:"p-1 shadow-sm block w-full focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm border border-gray-300 rounded-md",placeholder:"Add a comment"},null,512),[[A,o.value]])]),e[3]||(e[3]=t("div",null,[t("button",{type:"submit",class:"mt-2 inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"}," Comment")],-1))],32)])]))}}),K={class:"p-4 sm:p-6"},Q={class:"mb-4"},W={key:0,class:"text-center p-8"},X={key:1,class:"bg-white shadow overflow-hidden sm:rounded-lg"},Y={class:"px-4 py-5 sm:px-6"},Z={class:"mt-1 max-w-2xl text-sm text-gray-500"},tt={class:"border-t border-gray-200"},st={class:"bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"},et={class:"mt-1 pl-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2"},ot={class:"bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"},it={class:"mt-1 pl-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2"},nt={class:"bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"},dt={class:"mt-1 pl-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2"},rt={class:"bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"},at={class:"mt-1 pl-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2"},mt={class:"bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"},lt={class:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2"},ct=["value","selected"],ut={class:"bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"},gt={class:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2"},xt=["value","selected"],pt={key:2,class:"text-center p-8"},vt=v({__name:"TicketView",setup(l){const g=$(),c=Number(g.params.id),o=k(),{supportAgents:x,loading:y}=S(o);N(()=>{o.tickets.length===0&&o.fetchTickets(),x.value.length===0&&o.fetchAgents()});const e=V(()=>o.tickets.find(m=>m.id===c)),a=m=>{const s=m.target.value;o.assignAgent(c,s)},_=m=>{const s=m.target.value;o.updateTicketPriority(c,s)};return(m,s)=>{const h=B("RouterLink");return i(),n("div",K,[t("div",Q,[D(h,{to:{name:"home"},class:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"},{default:L(()=>[...s[0]||(s[0]=[R(" ← Back to all tickets ",-1)])]),_:1})]),u(y)&&!e.value?(i(),n("div",W,[...s[1]||(s[1]=[t("h2",{class:"text-2xl font-bold text-gray-800"},"Loading ticket...",-1)])])):e.value?(i(),n("div",X,[t("div",Y,[s[2]||(s[2]=t("h3",{class:"text-lg leading-6 font-medium text-gray-900"},"Ticket Details",-1)),t("p",Z," Information about ticket #"+d(e.value.id),1)]),t("div",tt,[t("dl",null,[t("div",st,[s[3]||(s[3]=t("dt",{class:"text-sm font-medium text-gray-500"},"Title",-1)),t("dd",et,d(e.value.title),1)]),t("div",ot,[s[4]||(s[4]=t("dt",{class:"text-sm font-medium text-gray-500"},"Description",-1)),t("dd",it,d(e.value.description),1)]),t("div",nt,[s[5]||(s[5]=t("dt",{class:"text-sm font-medium text-gray-500"},"Created At",-1)),t("dd",dt,d(u(b)(e.value.createdAt)),1)]),t("div",rt,[s[6]||(s[6]=t("dt",{class:"text-sm font-medium text-gray-500"},"Status",-1)),t("dd",at,d(e.value.status),1)]),t("div",mt,[s[7]||(s[7]=t("dt",{class:"text-sm font-medium text-gray-500"},"Priority",-1)),t("dd",lt,[t("select",{onChange:_,class:"mt-1 block w-full pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md"},[(i(!0),n(p,null,f(u(P),r=>(i(),n("option",{key:r,value:r,selected:e.value.priority===r},d(r),9,ct))),128))],32)])]),t("div",ut,[s[9]||(s[9]=t("dt",{class:"text-sm font-medium text-gray-500"},"Agent",-1)),t("dd",gt,[t("select",{onChange:a,class:"mt-1 block w-full pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md"},[s[8]||(s[8]=t("option",{value:void 0},"Unassigned",-1)),(i(!0),n(p,null,f(u(x),r=>(i(),n("option",{key:r,value:r,selected:e.value.agent===r},d(r),9,xt))),128))],32)])])])]),e.value?(i(),j(J,{key:0,ticket:e.value,class:"px-4 py-5 sm:px-6"},null,8,["ticket"])):M("",!0)])):(i(),n("div",pt,[...s[10]||(s[10]=[t("h2",{class:"text-2xl font-bold text-gray-800"},"Ticket not found",-1),t("p",{class:"text-gray-500"},"The ticket you are looking for does not exist.",-1)])]))])}}});export{vt as default};
